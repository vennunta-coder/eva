<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EVA - Assistente</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png">
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f9fafb; }
    .chat-container { max-width: 900px; margin: auto; height: 90vh; display: flex; flex-direction: column; border: 1px solid #ddd; border-radius: 12px; background: white; }
    .messages { flex: 1; overflow-y: auto; padding: 16px; }
    .bubble { padding: 12px 16px; border-radius: 18px; margin-bottom: 12px; font-size: 23px; max-width: 80%; }
    .bubble.user { background: #0078FF; color: white; margin-left: auto; border-bottom-right-radius: 6px; }
    .bubble.eva { background: #e5e7eb; color: #111827; margin-right: auto; border-bottom-left-radius: 6px; display: flex; gap: 10px; align-items: flex-start; }
    .bubble img { width: 32px; height: 32px; border-radius: 50%; margin-top: 2px; }
    .input-area { display: flex; padding: 12px; border-top: 1px solid #ddd; }
    textarea { flex: 1; resize: none; border: 1px solid #ccc; border-radius: 24px; padding: 10px 16px; font-size: 23px; outline: none; }
    button { margin-left: 8px; background: #0078FF; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 18px; cursor: pointer; }
    footer { text-align: center; padding: 6px; font-size: 14px; background: #fff; border-top: 1px solid #ddd; }
    footer span.black { color: black; }
    footer span.orange { color: orange; }
  </style>
</head>
<body>
  <!-- Container -->
  <div class="chat-container">
    <!-- Header -->
    <header class="flex items-center gap-3 px-4 py-3 border-b border-gray-200">
      <img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png" alt="EVA Logo" class="w-10 h-10">
      <h1 class="text-2xl font-bold"><span class="black">E</span><span class="orange">V</span><span class="black">A</span></h1>
    </header>

    <!-- Mensagens -->
    <div id="messages" class="messages">
      <div class="bubble eva">
        <img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png" alt="EVA">
        <p>OlÃ¡! Eu sou a EVA.<br>JÃ¡ vens com choradeira ou com piada?</p>
      </div>
    </div>

    <!-- Input -->
    <div class="input-area">
      <textarea id="user-input" rows="1" placeholder="Escreve a tua mensagem..."></textarea>
      <button id="send-btn">âž¤</button>
    </div>
  </div>

  <!-- RodapÃ© -->
  <footer>
    <span class="black">E</span><span class="orange">V</span><span class="black">A</span> Â© 2025
  </footer>

  <!-- Script -->
  <script>
    const messages = document.getElementById('messages');
    const input = document.getElementById('user-input');
    const btn = document.getElementById('send-btn');

    function addMessage(sender, text) {
      const div = document.createElement('div');
      div.classList.add('bubble', sender);

      if (sender === 'eva') {
        div.innerHTML = \`
          <img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png" alt="EVA">
          <p>\${text}</p>
        \`;
      } else {
        div.textContent = text;
      }
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    async function getEVAResponse(query) {
      query = query.trim().toLowerCase();

      // TraduÃ§Ã£o sÃ³ se pedida
      if (query.startsWith("traduz")) {
        const parts = query.split(" ");
        const lang = parts[1] || "en";
        const text = parts.slice(2).join(" ");
        if (!text) return "Diz-me o que queres traduzir ðŸ˜‰";
        const res = await fetch(\`https://translation.googleapis.com/language/translate/v2?key=AIzaSyD3OOOrDwc5KtuiUAzg1Pq2dGGVaRJjU3s&q=\${encodeURIComponent(text)}&target=\${lang}\`);
        const data = await res.json();
        return data.data.translations[0].translatedText;
      }

      // Clima
      if (query.includes("tempo em")) {
        const city = query.replace("tempo em", "").trim();
        const res = await fetch(\`https://api.openweathermap.org/data/2.5/weather?q=\${city}&appid=7db838cde261492656dc201d1d17e4aa&lang=pt&units=metric\`);
        const data = await res.json();
        if (data.main) {
          return \`Clima em \${city}: \${data.weather[0].description}, \${data.main.temp}Â°C\`;
        } else {
          return "NÃ£o consegui encontrar o clima dessa cidade.";
        }
      }

      // Wikipedia
      const res = await fetch(\`https://pt.wikipedia.org/api/rest_v1/page/summary/\${encodeURIComponent(query)}\`);
      if (res.ok) {
        const data = await res.json();
        if (data.extract) return data.extract;
      }

      // Fallback
      return "NÃ£o encontrei nada exato, mas podes tentar procurar no Google ðŸ˜‰";
    }

    btn.addEventListener('click', async () => {
      const text = input.value.trim();
      if (!text) return;
      addMessage('user', text);
      input.value = '';

      const response = await getEVAResponse(text);
      addMessage('eva', response);
    });
  </script>
</body>
</html>
