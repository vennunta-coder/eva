// Tradução sob pedido
if (text.toLowerCase().startsWith("traduz")) {
  const match = text.match(/para (\w+)/i);
  let targetLang = "en"; // padrão inglês
  if (match) {
    const lang = match[1].toLowerCase();
    if (lang.includes("ingl")) targetLang = "en";
    else if (lang.includes("fran")) targetLang = "fr";
    else if (lang.includes("espa")) targetLang = "es";
    else if (lang.includes("ital")) targetLang = "it";
    else if (lang.includes("alem")) targetLang = "de";
    else {
      appendMessage("eva", "Não reconheço esse idioma. Tenta inglês, francês, espanhol, italiano ou alemão.");
      return;
    }
  }

  const phrase = text.replace(/traduz/i, "").replace(/para \w+/i, "").trim();
  if (phrase === "") {
    appendMessage("eva", "O que queres que eu traduza?");
    awaitingTranslation = true;
    return;
  } else {
    const translation = await translateText(phrase, targetLang);
    appendMessage("eva", `Tradução: ${translation}`);
  }
  return;
}
