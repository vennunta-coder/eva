<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>EVA - Assistente Virtual</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #f1f1f1;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background-color: #1e1e1e;
      padding: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 2px solid #ff7b00;
    }
    header img {
      height: 40px;
      margin-right: 10px;
    }
    header h1 {
      font-size: 22px;
      color: #fff;
    }
    #chat {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    .message {
      max-width: 70%;
      padding: 12px;
      margin: 8px;
      border-radius: 12px;
      font-size: 15px;
      line-height: 1.4em;
    }
    .user {
      background-color: #ff7b00;
      color: #fff;
      align-self: flex-end;
      border-bottom-right-radius: 0;
    }
    .eva {
      background-color: #2a2a2a;
      color: #f1f1f1;
      align-self: flex-start;
      border-bottom-left-radius: 0;
      display: flex;
      align-items: flex-start;
    }
    .eva img {
      height: 28px;
      width: 28px;
      margin-right: 8px;
      border-radius: 50%;
    }
    #inputArea {
      display: flex;
      padding: 12px;
      background-color: #1e1e1e;
      border-top: 2px solid #ff7b00;
    }
    #userInput {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 6px;
      outline: none;
      background-color: #2a2a2a;
      color: #fff;
    }
    #sendBtn {
      margin-left: 10px;
      padding: 10px 20px;
      border: none;
      background-color: #ff7b00;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
    }
    footer {
      text-align: center;
      padding: 10px;
      font-size: 13px;
      background-color: #1e1e1e;
      border-top: 2px solid #ff7b00;
    }
    footer span {
      font-weight: bold;
      color: #fff;
    }
    footer .orange {
      color: #ff7b00;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png" alt="EVA Logo">
    <h1>EVA</h1>
  </header>

  <div id="chat"></div>

  <div id="inputArea">
    <input type="text" id="userInput" placeholder="Digite sua mensagem...">
    <button id="sendBtn">Enviar</button>
  </div>

  <footer>
    <span>E</span><span class="orange">V</span><span>A</span> © 2025
  </footer>

  <script>
    const chat = document.getElementById('chat');
    const input = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    // API Keys
    const WEATHER_KEY = "7db838cde261492656dc201d1d17e4aa"; 
    const GOOGLE_KEY = "AIzaSyD3OOOrDwc5KtuiUAzg1Pq2dGGVaRJjU3s";

    function addMessage(text, sender = "eva") {
      const msg = document.createElement("div");
      msg.classList.add("message", sender);

      if (sender === "eva") {
        msg.innerHTML = `<img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png"/> <div>${text}</div>`;
      } else {
        msg.textContent = text;
      }

      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    async function getWeather(city) {
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${WEATHER_KEY}&units=metric&lang=pt_br`;
      const res = await fetch(url);
      if (!res.ok) return "Não consegui pegar o clima agora 😕";
      const data = await res.json();
      return `O clima em ${data.name}: ${data.weather[0].description}, 🌡 ${data.main.temp}°C`;
    }

    async function translateText(text, target = "en") {
      const url = `https://translation.googleapis.com/language/translate/v2?key=${GOOGLE_KEY}`;
      const res = await fetch(url, {
        method: "POST",
        body: JSON.stringify({ q: text, target }),
        headers: { "Content-Type": "application/json" }
      });
      const data = await res.json();
      return data.data.translations[0].translatedText;
    }

    async function evaRespond(inputText) {
      const text = inputText.toLowerCase();

      // Tradução (se pedir explicitamente)
      if (text.startsWith("traduz")) {
        const parts = text.split(" ");
        const target = parts[1] || "en";
        const phrase = inputText.replace(/^traduz\s+\w+\s*/i, "");
        const translated = await translateText(phrase, target);
        return `Tradução para ${target}: ${translated}`;
      }

      // Clima
      if (text.includes("clima") || text.includes("tempo")) {
        const city = inputText.split("em ")[1] || "Lisboa";
        return await getWeather(city.trim());
      }

      // Sexo / erotismo
      if (text.includes("sexo") || text.includes("erotismo") || text.includes("prazer")) {
        return "O erotismo é a expressão da intimidade e da imaginação, um encontro entre desejo e emoção.";
      }

      // Fallback
      return "Vai ver se está a chover 🌧️";
    }

    sendBtn.addEventListener("click", async () => {
      const text = input.value.trim();
      if (!text) return;
      addMessage(text, "user");
      input.value = "";
      const reply = await evaRespond(text);
      addMessage(reply, "eva");
    });

    input.addEventListener("keypress", e => {
      if (e.key === "Enter") sendBtn.click();
    });

    // Mensagem inicial
    addMessage("Olá! Eu sou a EVA. O que deseja saber?", "eva");
  </script>
</body>
</html>
