<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat com EVA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #f3f4f6; }
    .chat-container { max-width: 600px; margin: 2rem auto; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .msg { padding: 10px 15px; margin: 8px; border-radius: 10px; max-width: 80%; }
    .user { background: #22c55e; color: white; margin-left: auto; }
    .eva { background: #e5e7eb; color: #111; display: flex; align-items: center; }
    .eva img { width: 24px; height: 24px; margin-right: 8px; border-radius: 50%; }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="p-4 border-b text-lg font-bold">Chat com <span class="text-green-600">EVA</span></div>
    <div id="chat" class="p-4 h-96 overflow-y-auto">
      <div class="msg eva"><img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png"> Ol√°! Eu sou a EVA. Pergunte-me algo üå∏</div>
    </div>
    <div class="p-4 border-t flex">
      <input id="input" type="text" placeholder="Digite sua mensagem..." class="flex-1 border rounded px-3 py-2">
      <button onclick="sendMsg()" class="ml-2 bg-green-500 text-white px-4 py-2 rounded">Enviar</button>
    </div>
  </div>

  <script>
    const chat = document.getElementById("chat");
    const input = document.getElementById("input");

    // üîë Config Google Custom Search
    const API_KEY = "AIzaSyD3OOOrDwc5KtuiUAzg1Pq2dGGVaRJjU3s";
    const CX = "81b1c6566b6be4ccf"; // seu motor custom search

    function addMessage(text, sender="eva") {
      const msg = document.createElement("div");
      msg.className = "msg " + sender;
      if (sender === "eva") {
        msg.innerHTML = `<img src="https://raw.githubusercontent.com/vennunta-coder/eva/refs/heads/main/logoeva.png"> ${text}`;
      } else {
        msg.textContent = text;
      }
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    async function sendMsg() {
      const text = input.value.trim();
      if (!text) return;
      addMessage(text, "user");
      input.value = "";

      // L√≥gica local primeiro
      let resposta = getLocalResponse(text);

      if (!resposta) {
        resposta = await searchGoogle(text);
      }

      addMessage(resposta);
    }

    // üîπ Respostas locais b√°sicas
    function getLocalResponse(msg) {
      msg = msg.toLowerCase();

      if (msg.includes("clima") || msg.includes("tempo")) {
        return "‚òÅÔ∏è O clima hoje est√° agrad√°vel, perfeito para um bom caf√©.";
      }
      if (msg.includes("traduz")) {
        return "üî§ Pe√ßa assim: 'traduza para ingl√™s: bom dia'.";
      }
      if (msg.includes("sexo") || msg.includes("erotismo")) {
        return "üî• O erotismo √© uma express√£o √≠ntima e criativa das rela√ß√µes humanas.";
      }

      return null; // se n√£o encontrou, cai no Google
    }

    // üîπ Busca no Google Custom Search
    async function searchGoogle(query) {
      try {
        const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CX}&q=${encodeURIComponent(query)}`;
        const res = await fetch(url);
        const data = await res.json();
        if (data.items && data.items.length > 0) {
          return `üîé ${data.items[0].snippet}`;
        } else {
          return "N√£o encontrei nada relevante no Google. ü§î";
        }
      } catch (e) {
        console.error(e);
        return "‚ö†Ô∏è Erro ao consultar o Google.";
      }
    }
  </script>
</body>
</html>
